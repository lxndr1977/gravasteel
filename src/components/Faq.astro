---
import { Icon } from "astro-icon/components";

export interface FaqItem {
  question: string;
  answer: string;
}

export interface Props {
  badge: string;
  title: string;
  intro: string;
  items: FaqItem[];
}

const { badge, title, intro, items } = Astro.props;
---

<section id="faq" class="bg-white pb-24">
  <div class="max-w-5xl mx-auto px-6 lg:px-8">
    <!-- Heading -->
    <div class="text-center mb-16">
      <span
        class="inline-block text-xs font-medium tracking-[0.25rem] uppercase text-zinc-600 bg-zinc-100 px-6 py-2 rounded"
      >
        {badge}
      </span>

      <h2 class="mt-6 text-4xl md:text-5xl font-semibold text-gray-900 leading-tight tracking-tight">
        {title}
      </h2>

      <p class="mt-4 text-lg text-gray-500 max-w-2xl mx-auto">
        {intro}
      </p>
    </div>

    <!-- FAQ List -->
    <div class="divide-y divide-gray-200 border-t border-b border-gray-200">
      {items.map((item, i) => (
        <div class="faq-item py-6 border-gray-200">
          <button
            type="button"
            class="faq-question w-full flex justify-between items-center text-left cursor-pointer group"
            data-index={i}
          >
            <h3 class="text-lg font-semibold text-gray-900">
              {item.question}
            </h3>
            <span
              class="ml-4 flex items-center justify-center w-8 h-8 rounded-full bg-zinc-50 text-zinc-500 transition-transform duration-300"
            >
              <Icon
                name="heroicons:plus"
                class="faq-icon transition-transform duration-300"
              />
            </span>
          </button>
          <div
            class="faq-answer hidden mt-4 text-gray-500 leading-relaxed transition-all duration-300"
          >
            {item.answer}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script is:inline>
  const faqButtons = document.querySelectorAll(".faq-question");

  faqButtons.forEach((button) => {
    button.addEventListener("click", () => {
      const parent = button.closest(".faq-item");
      const answer = parent.querySelector(".faq-answer");
      const icon = parent.querySelector(".faq-icon");

      document.querySelectorAll(".faq-answer").forEach((el) => {
        if (el !== answer) el.classList.add("hidden");
      });
      document.querySelectorAll(".faq-icon").forEach((el) => {
        if (el !== icon) el.classList.remove("rotate-45");
      });

      answer.classList.toggle("hidden");
      icon.classList.toggle("rotate-45");
    });
  });
</script>
